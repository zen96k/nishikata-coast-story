name: Test Batch
on:
  workflow_run:
    workflows:
      - Setup Environment
    types:
      - completed
jobs:
  test-batch:
    name: Test Batch
    runs-on: ubuntu-22.04
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v5
        with:
          ref: work
      - name: Install Dependencies
        working-directory: backend/batch
        run: npm install
      - name: Run Tests
        working-directory: backend/batch
        run: npm run ncs:test
